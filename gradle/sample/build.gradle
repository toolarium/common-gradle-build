apply from: "https://raw.githubusercontent.com/toolarium/common-gradle-build/master/gradle/common.gradle"


/***************************************************************************************
 * local variable
 ***************************************************************************************/
ext.myVar = "simple text"
printInfo "[1] My message: " + myVar 
ext.myVar = myVar + ", extended"
printInfo "[2] My message: " + myVar 


/***************************************************************************************
 * sample function
 ***************************************************************************************/
ext.myFunction = { 
	printInfo "myFunction -> start"
	ext.set(myVar, "other text")
	printInfo "[4] My message: " + myVar 
	printInfo "myFunction -> end"
}


/***************************************************************************************
 * sample task --> see >cb tasks
 ***************************************************************************************/
task sampleTask { 
	group = 'Verification'
	description = 'My sample task'

	printInfo "Sample Task: " + myVar 

    doLast { 
		printInfo "sampleTask -> start: " + myVar 
		myFunction()
		printInfo "sampleTask -> end: " + myVar 
    }
}


/***************************************************************************************
 * sample clean build task --> see >cb tasks
 ***************************************************************************************/
task sampleCleanBuildTask (type: GradleBuild) {
    tasks = ['clean']
	group = 'Verification'
	description = 'My clean build task'

	doLast { 
		printInfo "sampleCleanBuildTask -> start: " + myVar 
		ext.isReadyToPublish = true
		printInfo "sampleCleanBuildTask -> end: " + myVar 
    }
}

// some condition
if (project.hasProperty("isReadyToPublish")) {
    sampleCleanBuildTask.finalizedBy build
}


/***************************************************************************************
 * sample task dependency
 ***************************************************************************************/
task taskA { doLast { println("A") } }
task taskB { doLast { println("B") } }
taskA.dependsOn taskB
