/*
 * util.gradle
 *
 * Copyright by toolarium, all rights reserved.
 * MIT License: https://mit-license.org
 */

// see https://stackoverflow.com/questions/27777591/how-to-define-and-call-custom-methods-in-build-gradle/38032000
 
/** 
 * Get the hostname
 */
ext.getHostName = { ->
	String hostname;
	
	// get hostname
	hostname = System.env['hostname']
	if (hostname==null || hostname.isEmpty()) {
		hostname = System.env['HOSTNAME']
		if (hostname==null || hostname.isEmpty())
			hostname = System.env['COMPUTERNAME']
	}
	
	if (hostname==null || hostname.isEmpty())
		hostname = "localhost";
		
	return hostname;
}
 

/** 
 * Get the os name
 */
ext.getOsName = { ->
    final String osName = System.getProperty("os.name").toLowerCase();

    if (osName.contains("linux")) {
        return ("linux");
    } else if (osName.contains("mac os x") || osName.contains("darwin") || osName.contains("osx")) {
        return ("macos");
    } else if (osName.contains("windows")) {
        return ("windows");
    } else if (osName.contains("sunos") || osName.contains("solaris")) {
        return ("solaris");
    } else if (osName.contains("freebsd")) {
        return ("freebsd");
    }
    return ("unix");
}


/** 
 * Get the arch type
 */
ext.getOsArch = { ->
    final String osArch = System.getProperty("os.arch");

    if ("x86".equals(osArch)) {
        return ("i386");
    }
    else if ("x86_64".equals(osArch)) {
        return ("amd64");
    }
    else if ("powerpc".equals(osArch)) {
        return ("ppc");
    }
    return (osArch);
}